let showDecod=!1,showMessages=!0,showLength=!0,showValidation=!0,showResponseBackLog=!1;const responseBackLog={},regex=new RegExp("^[a-zA-Z0-9/s/g]+$"),regex2=new RegExp("^[a-h-j-n-pr-zA-H-J-N-PR-Z0-9/s/g]+$"),messageVinValidation=!1;let validateFlag=!1;var modal_flag=0,Country="",Manufacturer="",Year_Model="",Model="",Make="",VehicleType="",api_response_success=!1,api_response_error=!1,api_request=!1;const ValidateVINArray=["1","2","3","4","5"],ValidateCheckDigitArray=["1","2","3","4","5"];var r=[],last_wmi="",head=document.getElementsByTagName("HEAD")[0],link=document.createElement("link");link.rel="stylesheet",link.type="text/css",link.href="https://vin.vehiculo.com.mx/styles.min.css",(ganalytics=document.createElement("script")).src="https://www.googletagmanager.com/gtag/js?id=G-HH7B29B452";const gtm=document.createElement("noscript"),iframeGTM=document.createElement("iframe");iframeGTM.src="https://www.googletagmanager.com/ns.html?id=GTM-TLDTLHK",iframeGTM.height="0",iframeGTM.width="0",style="dsiplay:none;visibility:hidden",gtm.appendChild(iframeGTM);const axiosURL=document.createElement("script");axiosURL.src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.0.0-alpha.1/axios.min.js",document.head.appendChild(axiosURL);const body=document.getElementsByTagName("body")[0];body.appendChild(gtm);const tweetnacl=document.createElement("script");tweetnacl.src="https://cdn.jsdelivr.net/npm/tweetnacl-util@0.15.0/nacl-util.min.js",document.head.appendChild(tweetnacl);const tweetnaclUtil=document.createElement("script");tweetnaclUtil.src="https://cdn.jsdelivr.net/npm/tweetnacl@1.0.1/nacl.min.js",document.head.appendChild(tweetnaclUtil);var a,full_1=!1,full_2=!1,full_3=!1,full_4=!1,full_5=!1,i=0,canCopyPaste=!1,divMensajes="vinValidation",vinFieldID="inputVINValidate";mensajeNoSePuedeValidarAnio="* No es posible validar el a\xf1o modelo del autom\xf3vil, seg\xfan la norma <strong>ISO 3779.</strong>",mensajeNoSePuedeValidarDigitoVerificador="* No es posible validar el d\xedgito verificador del VIN, seg\xfan la norma <strong>ISO 3779.</strong>",mensajeNoCumpleDecreto="Seg\xfan del decreto por el que se fomenta la regularizaci\xf3n de veh\xedculos usados de procedencia extranjera, publicado en el Diario Oficial de la Federaci\xf3n el 19 de enero de 2022 y sus posteriores modificaciones, s\xf3lo es posible regularizar los veh\xedculos usados cuyo N\xfamero de Identificaci\xf3n Vehicular corresponda al de fabricaci\xf3n o ensamble del veh\xedculo en M\xe9xico, Estados Unidos de Am\xe9rica o Canad\xe1";const countLength=document.createElement("div"),vinDescription=document.createElement("ul"),verifyDigit=document.createElement("div"),mensajeDigitoVerificador=document.createElement("div"),mensajeDecreto=document.createElement("div"),mostrarMensajeDecreto=!1;function gtag(){dataLayer.push(arguments)}async function onKeyUp(b){(regex2.test(b.value)?(document.getElementById("vinValidation").style.display="none",document.getElementById("vinValidation").innerHTML="",responseBackLog.invalidCharacters=!1):(document.getElementById("vinValidation").style.display="block",document.getElementById("vinValidation").innerHTML='<div class="alert alert-warning" role="alert">Seg\xfan la norma ISO 3779, la composici\xf3n del VIN excluye las letras I, O y Q.</div>',responseBackLog.invalidCharacters=!0),responseBackLog.length=b.value.length,b.value.length>=1)?(b.value.length>=3&&!api_request?"9"!=b.value[2]?((wmi=b.value.substring(0,3))!=last_wmi&&(api_response_success=!1,api_response_error=!1,api_request=!1),api_request||api_response_success&&api_response_error||!showDecod||await getApiInformation().then(b=>{if(b=JSON.parse(b),responseBackLog.decodification=b,b.Country){let f=document.createElement("li");f.id="country",f.innerHTML=`<strong>Pa\xeds: </strong>${b.Country}`,document.getElementById("vinDescription").appendChild(f)}if(b.Manufacturer){let g=document.createElement("li");g.id="manufacturer",g.innerHTML=`<strong>Fabricante: </strong>${b.Manufacturer}`,document.getElementById("vinDescription").appendChild(g)}if(b.Region){let d=document.createElement("li");d.id="region",d.innerText=b.Region,d.innerHTML=`<strong>Regi\xf3n: </strong>${b.Region}`,document.getElementById("vinDescription").appendChild(d)}if(b.Make){let h=document.createElement("li");h.id="make",h.innerHTML=`<strong>Marca: </strong>${b.Make}`,document.getElementById("vinDescription").appendChild(h)}if(b.VehicleType){let e=document.createElement("li");e.id="vehicleType",e.innerText=b.VehicleType,e.innerHTML=`<strong>Tipo de Veh\xedculo: </strong>${b.VehicleType}`,document.getElementById("vinDescription").appendChild(e)}}).catch(b=>{console.log(b)})):"9"===b.value[2]&&b.value.length>=15&&((wmi=b.value.substring(0,3)+b.value.substr(12,3))!=last_wmi&&(api_response_success=!1,api_response_error=!1,api_request=!1),api_request||api_response_success&&api_response_error||await getApiInformation().then(b=>{if(b=JSON.parse(b),responseBackLog.decodification=b,b.Country){let f=document.createElement("li");f.id="country",f.innerHTML=`<strong>Pa\xeds: </strong>${b.Country}`,document.getElementById("vinDescription").appendChild(f)}if(b.Manufacturer){let g=document.createElement("li");g.id="manufacturer",g.innerHTML=`<strong>Fabricante: </strong>${b.Manufacturer}`,document.getElementById("vinDescription").appendChild(g)}if(b.Region){let d=document.createElement("li");d.id="region",d.innerText=b.Region,d.innerHTML=`<strong>Regi\xf3n: </strong>${b.Region}`,document.getElementById("vinDescription").appendChild(d)}if(b.Make){let h=document.createElement("li");h.id="make",h.innerHTML=`<strong>Marca: </strong>${b.Make}`,document.getElementById("vinDescription").appendChild(h)}if(b.VehicleType){let e=document.createElement("li");e.id="vehicleType",e.innerText=b.VehicleType,e.innerHTML=`<strong>Tipo de Veh\xedculo: </strong>${b.VehicleType}`,document.getElementById("vinDescription").appendChild(e)}}).catch(b=>{console.log(b)})):b.value.length<=2&&showDecod&&api_request&&(document.getElementById("vinDescription").childNodes,document.getElementById("vinDescription").innerHTML="",api_request=!1,responseBackLog.decodification&&delete responseBackLog.decodification),-1===ValidateVINArray.indexOf(b.value[0])&&showMessages?(mensajeDecreto.innerHTML=mensajeNoCumpleDecreto+` por lo que el <strong>VIN ${b.value.toUpperCase()}</strong> no aplica para tal caso.`,document.getElementById("mensajeDecreto").style.display="block"):document.getElementById("mensajeDecreto").style.display="none",showLength&&(document.getElementById("countLength").style.display="inline",countLength.innerText=`${b.value.length}/17`,b.value.length<10&&showLength?document.getElementById("countLength").style.color="red":b.value.length>=10&&b.value.length<=17&&(document.getElementById("countLength").style.color="black")),-1!=ValidateCheckDigitArray.indexOf(b.value[0])?(17===b.value.length&&validateChDigit(),mensajeDigitoVerificador.innerHTML="* La validaci\xf3n del VIN es seg\xfan la norma <strong>ISO 3779</strong>."):-1===ValidateCheckDigitArray.indexOf(b.value[0])&&b.value.length<17&&showValidation&&(mensajeDigitoVerificador.innerHTML=mensajeNoSePuedeValidarDigitoVerificador),b.value.length<17&&showValidation&&(document.getElementById("verifyDigit").innerHTML="")):0===b.value.length&&(document.getElementById("countLength").style.display="none",mensajeDigitoVerificador.innerHTML="",document.getElementById("vinValidation").style.display="none",document.getElementById("vinValidation").innerHTML="",document.getElementById("mensajeDecreto").style.display="none",document.getElementById("verifyDigit"),innerHTML="",document.getElementById("verifyDigit").style.display="none"),showResponseBackLog&&console.log(responseBackLog)}function validateModel(){let b=document.getElementById(vinFieldID);/^\d+$/.test(b.value[6])?(Year_Model=validateYearGroupA(b.value[9].toUpperCase()),document.getElementById("YearModel_value").innerHTML=Year_Model,document.getElementById("YearModel").style.display="block"):(Year_Model=ValidateYearGroupB(b.value[9].toUpperCase()),document.getElementById("YearModel_value").innerHTML=Year_Model,document.getElementById("YearModel").style.display="block")}function validateChDigit(){let b=document.getElementById(vinFieldID);validateVerificationDigit(b.value.toUpperCase(),b.value[8].toUpperCase())?(document.getElementById("verifyDigit").style.display="block",document.getElementById("verifyDigit").innerHTML="<span>&#10004;</span> El d\xedgito veficador del VIN es correcto.",document.getElementById("verifyDigit").classList.remove("errorValidation"),document.getElementById("countLength").classList.remove("errorValidation"),document.getElementById("verifyDigit").classList.add("successValidation"),document.getElementById("countLength").classList.add("successValidation"),document.getElementById("countLength").style.color="green",responseBackLog.vinValidation=!0):(document.getElementById("verifyDigit").style.display="block",document.getElementById("verifyDigit").innerHTML="<span>&#10008;</span> El d\xedgito verificador del VIN es incorrecto.",document.getElementById("verifyDigit").classList.remove("successValidation"),document.getElementById("countLength").classList.remove("successValidation"),document.getElementById("verifyDigit").classList.add("errorValidation"),document.getElementById("countLength").style.color="red",responseBackLog.vinValidation=!1)}function clsAlphaNoOnly(b){var d=new RegExp("^[a-zA-Z0-9/s/g]+$"),e=String.fromCharCode(b.charCode?b.charCode:b.which);return!!d.test(e)||(b.preventDefault(),!1)}function validateVerificationDigit(d,e){var b=0;for(i=0;i<d.length;i++)b+=characterValue(d[i])*positionValue(i+1);if(b>0){let f=b%11;return f===parseInt(e)||10===f&&"X"===e||void 0}return!1}function characterValue(d){var b=0;switch(d){case"A":case"J":case"1":b=1;break;case"B":case"K":case"S":case"2":b=2;break;case"C":case"L":case"T":case"3":b=3;break;case"D":case"M":case"U":case"4":b=4;break;case"E":case"N":case"V":case"5":b=5;break;case"F":case"W":case"6":b=6;break;case"G":case"P":case"X":case"7":b=7;break;case"H":case"Y":case"8":b=8;break;case"I":case"\xd1":case"O":case"Q":case"0":default:b=0;break;case"R":case"Z":case"9":b=9}return b}function positionValue(d){var b=0;switch(d){case 1:case 11:b=8;break;case 2:case 12:b=7;break;case 3:case 13:b=6;break;case 4:case 14:b=5;break;case 5:case 15:b=4;break;case 6:case 16:b=3;break;case 7:case 17:b=2;break;case 8:b=10;break;case 9:b=0;break;case 10:b=9}return b}function validateYearGroupA(d){let b;switch(d){case"0":case"A":b="1980";break;case"B":b="1981";break;case"C":b="1982";break;case"D":b="1983";break;case"E":b="1984";break;case"F":b="1985";break;case"G":b="1986";break;case"H":b="1987";break;case"J":b="1988";break;case"K":b="1989";break;case"L":b="1990";break;case"M":b="1991";break;case"N":b="1992";break;case"P":b="1993";break;case"R":b="1994";break;case"S":b="1995";break;case"T":b="1996";break;case"V":b="1997";break;case"W":b="1998";break;case"X":b="1999";break;case"Y":b="2000";break;case"1":b="2001";break;case"2":b="2002";break;case"3":b="2003";break;case"4":b="2004";break;case"5":b="2005";break;case"6":b="2006";break;case"7":b="2007";break;case"8":b="2008";break;case"9":b="2009";break;default:result="Unknown"}return b}function ValidateYearGroupB(d){let b;switch(d){case"A":b="2010";break;case"B":b="2011";break;case"C":b="2012";break;case"D":b="2013";break;case"E":b="2014";break;case"F":b="2015";break;case"G":b="2016";break;case"H":b="2017";break;case"J":b="2018";break;case"K":b="2019";break;case"L":b="2020";break;case"M":b="2021";break;case"N":b="2022";break;case"P":b="2023";break;case"R":b="2024";break;case"S":b="2025";break;case"T":b="2026";break;case"V":b="2027";break;case"W":b="2028";break;case"X":b="2029";break;case"Y":b="2030";break;case"1":b="2031";break;case"2":b="2032";break;case"3":b="2033";break;case"4":b="2034";break;case"5":b="2035";break;case"6":b="2036";break;case"7":b="2037";break;case"8":b="2038";break;case"9":b="2039";break;default:result="Unknown"}return b}function getApiInformation(){return api_request=!0,new Promise((b,d)=>{jQuery.ajax({type:"GET",url:"https://api.globalgbc.com/api/wmi/"+wmi,crossDomain:!1,dataType:"json",beforeSend(){showDecod&&(document.getElementById("spinner").style.display="block")},complete(){showDecod&&(document.getElementById("spinner").style.display="none")},error(b){api_response_error=!0,d(b)},success(d){if(Region="",Country="",Manufacturer="",Make="",VehicleType="",last_wmi=wmi,api_response_success=!0,2===d.code&&1===d.length)Country=d.data[0].Country,Manufacturer=d.data[0].Manufacturer,Make=d.data[0].Make,VehicleType=d.data[0].VehicleType,Region=d.data[0].Region,WMIDecode_boolean=1;else if(2===d.code&&d.length>1){var f=[],g=[],h=[],j=[],k=[];d.data.forEach(b=>{0>f.indexOf(b.Region)&&f.push(b.Region),0>g.indexOf(b.Country)&&g.push(b.Country),0>h.indexOf(b.Manufacturer)&&h.push(b.Manufacturer),0>j.indexOf(b.Make)&&j.push(b.Make),0>k.indexOf(b.VehicleType)&&k.push(b.VehicleType)});let e=1;f.forEach(b=>{e===f.length?Region+=b:Region=Region+b+" / ",e++}),e=1,g.forEach(b=>{e===g.length?Country+=b:Country=Country+b+" / ",e++}),e=1,h.forEach(b=>{e===h.length?Manufacturer+=b:Manufacturer=Manufacturer+b+" / ",e++}),e=1,j.forEach(b=>{e===j.length?Make+=b:Make=Make+b+" / ",e++}),e=1,k.forEach(b=>{e===k.length?VehicleType+=b:VehicleType=VehicleType+b+" / ",e++}),WMIDecode_boolean=1}else 2===d.code&&0===d.length&&(Country="Sin registro",Manufacturer="Sin registro",Make="Sin registro",VehicleType="Sin registro",Region="Sin registro");let l={Country:Country,Manufacturer:Manufacturer,Make:Make,VehicleType:VehicleType,Region:Region};b(JSON.stringify(l))}})})}function changeCheckbox(b){"showMessages"===b.id&&((showMessages=!showMessages)?(document.getElementById("mensajeDigitoVerificador").style.display="block",document.getElementById("mensajeDecreto").style.display="block",document.getElementById("vinValidation").style.display="block"):(document.getElementById("mensajeDigitoVerificador").style.display="none",document.getElementById("mensajeDecreto").style.display="none",document.getElementById("vinValidation").style.display="none")),"showDecod"===b.id&&(showDecod=!showDecod,document.getElementById("responseText").style.display=showDecod?"block":"none"),"showLength"===b.id&&(showLength=!showLength,document.getElementById("countLength").style.display=showLength?"inline-block":"none"),"showValidation"===b.id&&(showValidation=!showValidation,document.getElementById("verifyDigit").style.display=showValidation?"block":"none"),b.value=!b.value,onKeyUp(document.getElementById("inputVINValidate"))}async function m(e){e.preventDefault();let b=nacl.randomBytes(24),f=Uint8Array.from(atob("Tn6Y2oLuIkSKK49+/B0UjO2RqnWjSCjjy55ToSMkJH0="),b=>b.charCodeAt(0)),g=Uint8Array.from(atob("7y2unVY1Jg1VWSKpKPM9+Jz14wwkSXYiUa4JJsSpfXA="),b=>b.charCodeAt(0)),h=document.getElementById("inputVINValidate").value,j=c(),k=JSON.stringify({vin:h,_ga:j}),d=nacl.box(nacl.util.decodeUTF8(k),b,f,g);d=btoa(String.fromCharCode.apply(null,d)),await axios({url:"https://vin.vehiculo.com.mx/metrics/v2",method:"POST",data:{box:d,nonce:b=btoa(String.fromCharCode.apply(null,b))},timeout:3e3}).then(b=>(document.getElementsByTagName("form")[0].submit(),!0)).catch(b=>(document.getElementsByTagName("form")[0].submit(),!0))}function c(){return _get_ga()?_get_ga():_set_ga()}function _set_ga(){let b=btoa(createGA());return localStorage.setItem("_gaSecure",b),b}function _get_ga(){return localStorage.getItem("_gaSecure")??null}!function(b,g,h,j,d,e,f){b.GoogleAnalyticsObject=d,b[d]=b[d]||function(){(b[d].q=b[d].q||[]).push(arguments)},b[d].l=1*new Date,e=g.createElement(h),f=g.getElementsByTagName(h)[0],e.async=1,e.src=j,f.parentNode.insertBefore(e,f)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),function(d,f,g,b,j){d[b]=d[b]||[],d[b].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var h=f.getElementsByTagName(g)[0],e=f.createElement(g);e.async=!0,e.src="https://www.googletagmanager.com/gtm.js?id="+j+("dataLayer"!=b?"&l="+b:""),h.parentNode.insertBefore(e,h)}(window,document,"script","dataLayer","GTM-TLDTLHK"),ga("create","321780585","auto"),ga("send","pageview"),window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-HH7B29B452",{custom_map:{dimension1:"ip"}}),async function(){if(head.appendChild(link),countLength.id="countLength",verifyDigit.id="verifyDigit",mensajeDigitoVerificador.id="mensajeDigitoVerificador",mensajeDecreto.id="mensajeDecreto",mensajeDecreto.classList="alertDecreto",document.getElementById(vinFieldID).insertAdjacentElement("afterend",mensajeDecreto),document.getElementById(vinFieldID).insertAdjacentElement("afterend",mensajeDigitoVerificador),document.getElementById(vinFieldID).insertAdjacentElement("afterend",verifyDigit),document.getElementById(vinFieldID).insertAdjacentElement("afterend",countLength),document.getElementById(vinFieldID).setAttribute("required","true"),document.getElementById(vinFieldID).setAttribute("autocomplete","off"),document.getElementById(vinFieldID).setAttribute("minlength","5"),document.getElementById(vinFieldID).setAttribute("maxlength","17"),document.getElementById(vinFieldID).setAttribute("aria-describedby","vinHelp"),document.getElementById(vinFieldID).setAttribute("onkeypress","clsAlphaNoOnly(event)"),document.getElementById(vinFieldID).setAttribute("onkeyup","onKeyUp(this)"),document.getElementById(vinFieldID).setAttribute("onPaste","return false;"),document.getElementById(vinFieldID).setAttribute("placeholder","1C7XXXXXXXXXXXXXXXX8"),document.getElementById(vinFieldID).setAttribute("onPaste","return false;"),document.getElementById("mensajeDecreto").style.display="none",showDecod){vinDescription.id="vinDescription",vinDescription.style="list-style: none;";let b=document.createElement("div");b.id="spinner",b.classList.add("spinner"),b.style.display="none",document.getElementById("responseText").appendChild(vinDescription),document.getElementById("responseText").appendChild(b)}document.getElementById(vinFieldID).parentElement.style.padding="15px 0px 10px 0px",document.getElementsByTagName("form")&&(buttonForm=document.getElementsByTagName("form")[0].getElementsByTagName("button")[0]).setAttribute("onClick","m(event)")}(),window.onload=async function(){await axios.get("https://api.ipify.org?format=json").then(b=>{gtag("event","ip_address",{ip:b.data.ip})}),c()};const createGA=()=>"10000000-1000-4000-8000-100000000000".replace(/[018]/g,b=>(b^crypto.getRandomValues(new Uint8Array(1))[0]&15>>b/4).toString(16))